<?phpif (! defined ( 'BASEPATH' ))	exit ( 'No direct script access allowed' );class Wechat extends CI_Controller {	function __construct() {		parent::__construct ();	}	public function index(){	   $this->js_api_call();	}			// 	Authorized access to wechat login code --- This method is used by the frontend to obtain wechat login code	//  sample	function authorizedgetwechatcode(){		$code = $this->input->get('code');		 		//网页授权   拉取用户信息		if($code != ""){//用户同意获取资料 -- 获得 code					}else{			redirect('https://open.weixin.qq.com/connect/oauth2/authorize?appid='.WECHAT_APPID().'&redirect_uri='.current_url().'&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect');		}				echo $code;	}	// 	Authorized access to wechat user information//  Code is provided by the frontend//  sample    function getauthorizedwechatinfo_BYcode($code){		$wechatinfo = getwechatuserinfo($code);		$wechat_openid = $wechatinfo['wechat_openid'];		$wechat_nickname = $wechatinfo['wechat_nickname'];		$wechat_nickname = userTextEncode($wechat_nickname);		$wechat_sex = $wechatinfo['wechat_sex'];		$wechat_avatar = $wechatinfo['wechat_avatar'];		$wechat_province = $wechatinfo['wechat_province'];		$wechat_city = $wechatinfo['wechat_city'];		$wechat_country = $wechatinfo['wechat_country'];		print_r($newuser);exit;    }// 	followed wechat user information//  sample    function getfollowedwechatuserinfo($open_id = 0){    	$ACC_TOKEN = $this->JssdkModel->getAccessToken();        	$url = "https://api.weixin.qq.com/cgi-bin/user/info?access_token=".$ACC_TOKEN."&openid=".$open_id."&lang=zh_CN";    	$post_data = '{}';    	$ch = curl_init();    	curl_setopt($ch, CURLOPT_URL, $url);    	curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);    	curl_setopt($ch, CURLOPT_POST, 1);//post数据    	curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);// post的变量    	$output = curl_exec($ch);    	curl_close($ch);        	return $output;    	// 		print_r($output);//打印获得的数据    	//{"errcode":0,"errmsg":"ok"}    }        // 	Call wechat order payment    //  sample	function js_api_call(){		$data['order_number'] = 'SP20210615001';		$data['total_fee'] = 0.01 * 100;//1分钱		$this->load->view('wechat/shoppingcart_pay_js_api_call', $data);	}							}
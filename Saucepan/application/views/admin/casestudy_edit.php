<?php $this->load->view('admin/header')?><script type='text/javascript' src='<?php echo base_url()?>themes/default/js/fileuploader.js'></script><script type="text/javascript" src='<?php echo CDN_URL();?>themes/default/js/admin/admin_product.js?date=<?php echo CACHE_USETIME()?>'></script><?php $lancodelist = getlancodelist();?><script type="text/javascript">//套餐---编辑function tosave_casestudyinfo(casestudy_id){	var lancodelist = getlancodelist();	if(isajaxsaveing == 0){		//具体点击的按钮		actionsubmit_button = $('div[onclick="tosave_casestudyinfo('+casestudy_id+')"]');		//ajax正在保存中		isajaxsaveing = 1;		//返回url		var backurl = $('input[name="backurl"]').val();		//将提交按钮设置为保存中		actionsubmit_button.attr('class', 'gksel_btn_action_off');		actionsubmit_button.html('<img class="icon_loading" src="'+baseurl+'themes/default/images/ajax_loading.gif"/><span><?php if($this->langtype == '_ch'){echo '保存中';}else{echo 'Loading';}?>...</span>');						//----定义的字段------START			var GETOBJ = [];			var GETOBJ_num = 0;			GETOBJ[GETOBJ_num] = new Array();			GETOBJ[GETOBJ_num]['field_name'] = 'status';			GETOBJ[GETOBJ_num]['field_realname'] = 'status';			GETOBJ[GETOBJ_num]['field_type'] = "checkboxradio";			GETOBJ[GETOBJ_num]['field_CMNAME'] = '';						GETOBJ_num = GETOBJ_num + 1;			GETOBJ[GETOBJ_num] = new Array();			GETOBJ[GETOBJ_num]['field_name'] = 'img1_gksel';			GETOBJ[GETOBJ_num]['field_realname'] = 'casestudy_pic';			GETOBJ[GETOBJ_num]['field_type'] = "image";			GETOBJ[GETOBJ_num]['field_CMNAME'] = '';            GETOBJ_num = GETOBJ_num + 1;            GETOBJ[GETOBJ_num] = new Array();            GETOBJ[GETOBJ_num]['field_name'] = 'img1_gksel2';            GETOBJ[GETOBJ_num]['field_realname'] = 'casestudy_pic2';            GETOBJ[GETOBJ_num]['field_type'] = "image";            GETOBJ[GETOBJ_num]['field_CMNAME'] = '';			GETOBJ_num = GETOBJ_num + 1;			GETOBJ[GETOBJ_num] = new Array();			GETOBJ[GETOBJ_num]['field_name'] = 'casestudy_href';			GETOBJ[GETOBJ_num]['field_realname'] = 'casestudy_href';			GETOBJ[GETOBJ_num]['field_type'] = "input";			GETOBJ[GETOBJ_num]['field_CMNAME'] = '';		//----定义的字段------END								//----定义多语言的字段------START			var GETLANGOBJ = new Array();			var GETLANGOBJ_num = 0;			GETLANGOBJ[GETLANGOBJ_num] = new Array();			GETLANGOBJ[GETLANGOBJ_num]['field_name'] = 'casestudy_name';			GETLANGOBJ[GETLANGOBJ_num]['field_type'] = "input";			GETLANGOBJ[GETLANGOBJ_num]['field_CMNAME'] = '<?php if($this->langtype == '_ch'){echo '案例名称';}else{echo 'Casestudy name';}?>';			GETLANGOBJ_num = GETLANGOBJ_num + 1;			GETLANGOBJ[GETLANGOBJ_num] = new Array();			GETLANGOBJ[GETLANGOBJ_num]['field_name'] = 'casestudy_tagline';			GETLANGOBJ[GETLANGOBJ_num]['field_type'] = "textarea";			GETLANGOBJ[GETLANGOBJ_num]['field_CMNAME'] = '';            GETLANGOBJ_num = GETLANGOBJ_num + 1;            GETLANGOBJ[GETLANGOBJ_num] = new Array();            GETLANGOBJ[GETLANGOBJ_num]['field_name'] = 'casestudy_introduction';            GETLANGOBJ[GETLANGOBJ_num]['field_type'] = "textarea";            GETLANGOBJ[GETLANGOBJ_num]['field_CMNAME'] = '';            GETLANGOBJ_num = GETLANGOBJ_num + 1;            GETLANGOBJ[GETLANGOBJ_num] = new Array();            GETLANGOBJ[GETLANGOBJ_num]['field_name'] = 'casestudy_description';            GETLANGOBJ[GETLANGOBJ_num]['field_type'] = "textarea";            GETLANGOBJ[GETLANGOBJ_num]['field_CMNAME'] = '';            GETLANGOBJ_num = GETLANGOBJ_num + 1;            GETLANGOBJ[GETLANGOBJ_num] = new Array();            GETLANGOBJ[GETLANGOBJ_num]['field_name'] = 'casestudy_about';            GETLANGOBJ[GETLANGOBJ_num]['field_type'] = "textarea";            GETLANGOBJ[GETLANGOBJ_num]['field_CMNAME'] = '';		//----定义多语言的字段------END				var returnOBJ = checkjsformcontent(lancodelist, GETOBJ, GETLANGOBJ);//----定义字段变量, 检查是否为空或格式错误------START		var postOBJ = returnOBJ.postOBJ;		postOBJ.backurl = backurl;		postOBJ.GETOBJ = returnOBJ.GETOBJ_arr;		postOBJ.GETOBJ_type = returnOBJ.GETOBJ_type_arr;		postOBJ.GETOBJ_realname = returnOBJ.GETOBJ_realname_arr;		postOBJ.GETLANGOBJ = returnOBJ.GETLANGOBJ_arr;		if(returnOBJ.ispass == 1){			$.post(baseurl+'index.php/admins/casestudy/edit_casestudy/'+casestudy_id, postOBJ, function (data){				console.log(data);				var obj = eval( "(" + data + ")" );				actionsubmit_button.html('<img class="icon_success" src="'+baseurl+'themes/default/images/global_ok.png"/><span><?php if($this->langtype == '_ch'){echo '保存成功';}else{echo 'Success';}?></span>');				location.href = obj.backurl;			})		}else{			actionsubmit_button.attr('class', 'gksel_btn_action_on');			actionsubmit_button.html(L['cy_save']);			isajaxsaveing = 0;//ajax正在保存中 --- 释放		}	}}</script><form method="post">	<table class="gksel_normal_tabpost">		<tr>			<td align="right"><?php echo lang('dz_product_picture')?></td>			<td>				<div class="img_gksel_show" id="img1_gksel_show">					<?php 						$img1_gksel = '';						if(file_exists($casestudyinfo['casestudy_pic']) && $casestudyinfo['casestudy_pic']!=""){							$img1_gksel = $casestudyinfo['casestudy_pic'];							echo '<img style="float:left;max-width:400px;max-height:400px;" src="'.base_url().$casestudyinfo['casestudy_pic'].'" />';						}					?>				</div>				<div class="img_gksel_choose" id="img1_gksel_choose">上传图片</div>				<div style="float:left;"><input type="hidden" id="img1_gksel" name="img1_gksel" value="<?php echo $img1_gksel;?>"/></div>				<div style="float:left;margin-left:5px;margin-top:5px;"><font class="fonterror" id="img1_gksel_error"><font style="color:gray;">仅支持 Jpg, Png, Gif (800px * 800px)</font></div>			</td>		</tr>        <tr>			<td align="right"><?php echo lang('dz_product_picture')?></td>			<td>				<div class="img_gksel_show" id="img1_gksel_show2">					<?php						$img1_gksel2 = '';						if(file_exists($casestudyinfo['casestudy_pic2']) && $casestudyinfo['casestudy_pic2']!=""){							$img1_gksel2 = $casestudyinfo['casestudy_pic2'];							echo '<img style="float:left;max-width:400px;max-height:400px;" src="'.base_url().$casestudyinfo['casestudy_pic2'].'" />';						}					?>				</div>				<div class="img_gksel_choose" id="img1_gksel_choose2">上传图片</div>				<div style="float:left;"><input type="hidden" id="img1_gksel2" name="img1_gksel2" value="<?php echo $img1_gksel2;?>"/></div>				<div style="float:left;margin-left:5px;margin-top:5px;"><font class="fonterror" id="img1_gksel_error2"><font style="color:gray;">仅支持 Jpg, Png, Gif (1280px * 456px)</font></div>			</td>		</tr>		<tr>			<td colspan="2">				<div style="float:left;width:100%;border-top:1px solid #EFEFEF;margin:10px 0px;"></div>			</td>		</tr>		<tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '案例名称';}else{echo 'Casestudy name';}?> (English)</td>			<td align="left">				<input type="text" name="casestudy_name_en" value="<?php echo $casestudyinfo['casestudy_name_en']?>"/>				<div class="tipsgroupbox"><div class="request">*</div></div>			</td>		</tr>		<tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '案例名称';}else{echo 'Casestudy name';}?> (中文)</td>			<td align="left">				<input type="text" name="casestudy_name_ch" value="<?php echo $casestudyinfo['casestudy_name_ch']?>"/>				<div class="tipsgroupbox"><div class="request">*</div></div>			</td>		</tr>		<tr>			<td colspan="2">				<div style="float:left;width:100%;border-top:1px solid #EFEFEF;margin:10px 0px;"></div>			</td>		</tr>		<tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '案例简介';}else{echo 'Casestudy introduction';}?> (English)</td>			<td align="left">				<textarea name="casestudy_introduction_en"><?php echo $casestudyinfo['casestudy_introduction_en']?></textarea>				<div class="tipsgroupbox"><div class="request">*</div></div>			</td>		</tr>		<tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '案例简介';}else{echo 'Casestudy introduction';}?> (中文)</td>			<td align="left">				<textarea name="casestudy_introduction_ch"><?php echo $casestudyinfo['casestudy_introduction_ch']?></textarea>				<div class="tipsgroupbox"><div class="request">*</div></div>			</td>		</tr>        <tr>            <td colspan="2">                <div style="float:left;width:100%;border-top:1px solid #EFEFEF;margin:10px 0px;"></div>            </td>        </tr>        <tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '服务内容';}else{echo 'Scope';}?> (English)</td>			<td align="left">				<textarea name="casestudy_tagline_en"><?php echo $casestudyinfo['casestudy_tagline_en']?></textarea>				<div class="tipsgroupbox"><div class="request">*</div></div>			</td>		</tr>		<tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '服务内容';}else{echo 'Scope';}?> (中文)</td>			<td align="left">				<textarea name="casestudy_tagline_ch"><?php echo $casestudyinfo['casestudy_tagline_ch']?></textarea>				<div class="tipsgroupbox"><div class="request">*</div></div>			</td>		</tr>        <tr>            <td colspan="2">                <div style="float:left;width:100%;border-top:1px solid #EFEFEF;margin:10px 0px;"></div>            </td>        </tr>        <tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '关于案例';}else{echo 'About';}?> (English)</td>			<td align="left">				<textarea name="casestudy_about_en"><?php echo $casestudyinfo['casestudy_about_en']?></textarea>				<div class="tipsgroupbox"><div class="request">*</div></div>			</td>		</tr>		<tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '关于案例';}else{echo 'About';}?> (中文)</td>			<td align="left">				<textarea name="casestudy_about_ch"><?php echo $casestudyinfo['casestudy_about_ch']?></textarea>				<div class="tipsgroupbox"><div class="request">*</div></div>			</td>		</tr>        <tr>            <td colspan="2">                <div style="float:left;width:100%;border-top:1px solid #EFEFEF;margin:10px 0px;"></div>            </td>        </tr>        <tr>            <td align="right" width="150"><?php if($this->langtype == '_ch'){echo '我们做了什么';}else{echo 'What We Did';}?> (English)</td>            <td align="left">                <textarea name="casestudy_description_en"><?php echo $casestudyinfo['casestudy_description_en']?></textarea>                <div class="tipsgroupbox"><div class="request">*</div></div>            </td>        </tr>        <tr>            <td align="right" width="150"><?php if($this->langtype == '_ch'){echo '我们做了什么';}else{echo 'What We Did';}?> (中文)</td>            <td align="left">                <textarea name="casestudy_description_ch"><?php echo $casestudyinfo['casestudy_description_ch']?></textarea>                <div class="tipsgroupbox"><div class="request">*</div></div>            </td>        </tr>        <tr>            <td colspan="2">                <div style="float:left;width:100%;border-top:1px solid #EFEFEF;margin:10px 0px;"></div>            </td>        </tr>		<tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '网址';}else{echo 'URL';}?> </td>			<td align="left">			<input type="text" name="casestudy_href" value="<?php echo $casestudyinfo['casestudy_href']?>"/><!--				<div class="tipsgroupbox"><div class="request">*</div></div>-->			</td>		</tr>		<tr>			<td colspan="2">				<div style="float:left;width:100%;border-top:1px solid #EFEFEF;margin:10px 0px;"></div>			</td>		</tr>		<tr>			<td align="right" width="150"><?php if($this->langtype == '_ch'){echo '状态';}else{echo 'Status';}?></td>			<td align="left">				<input name="status" type="checkbox" defaultvalue="0" class="mgc-switch" value="1" <?php if($casestudyinfo['status'] == 1){echo 'checked';}?>/>			</td>		</tr>		<tr>			<td>				<input name="backurl" type="hidden" value="<?php echo $backurl;?>"/>			</td>			<td align="left">				<div class="gksel_btn_action_on" onclick="tosave_casestudyinfo(<?php echo $casestudyinfo["casestudy_id"]?>)"><?php echo lang('cy_save')?></div>			</td>		</tr>	</table></form><script type="text/javascript">$(document).ready(function(){	var button_gksel1 = $('#img1_gksel_choose'), interval;	if(button_gksel1.length>0){		new AjaxUpload(button_gksel1,{			action: baseurl+'index.php/welcome/uplogo/800/800', 			name: 'logo',onSubmit : function(file, ext){				if (ext && /^(jpg|png|gif)$/.test(ext)){					button_gksel1.text('上传中');					this.disable();					interval = window.setInterval(function(){						var text = button_gksel1.text();						if (text.length < 13){							button_gksel1.text(text + '.');											} else {							button_gksel1.text('上传中');										}					}, 200);				} else {					$('#img1_gksel_error').html('上传失败');					return false;				}			},			onComplete: function(file, response){				button_gksel1.text('上传图片');										window.clearInterval(interval);				this.enable();				if(response=='false'){					$('#img1_gksel_error').html('上传失败');				}else{					var pic = eval("("+response+")");					$('#img1_gksel_show').html('<img style="float:left;max-width:400px;max-height:400px;" src="'+baseurl+pic.logo+'" />');					$('#img1_gksel').attr('value',pic.logo);					$('#img1_gksel_error').html('');				}				}		});	}    var button_gksel2 = $('#img1_gksel_choose2'), interval;    if(button_gksel2.length>0){        new AjaxUpload(button_gksel2,{            action: baseurl+'index.php/welcome/uplogo/1250/456',            name: 'logo',onSubmit : function(file, ext){                if (ext && /^(jpg|png|gif)$/.test(ext)){                    button_gksel2.text('上传中');                    this.disable();                    interval = window.setInterval(function(){                        var text = button_gksel2.text();                        if (text.length < 13){                            button_gksel2.text(text + '.');                        } else {                            button_gksel2.text('上传中');                        }                    }, 200);                } else {                    $('#img1_gksel_error2').html('上传失败');                    return false;                }            },            onComplete: function(file, response){                button_gksel2.text('上传图片');                window.clearInterval(interval);                this.enable();                if(response=='false'){                    $('#img1_gksel_error2').html('上传失败');                }else{                    var pic = eval("("+response+")");                    $('#img1_gksel_show2').html('<img style="float:left;max-width:400px;max-height:400px;" src="'+baseurl+pic.logo+'" />');                    $('#img1_gksel2').attr('value',pic.logo);                    $('#img1_gksel_error2').html('');                }            }        });    }})</script><?php $this->load->view('admin/footer')?>